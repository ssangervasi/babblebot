{
  "author": "ssangervasi",
  "description": "",
  "extensionNamespace": "",
  "fullName": "SRS Utils",
  "helpPath": "",
  "iconUrl": "",
  "name": "srs_utils",
  "previewIconUrl": "",
  "shortDescription": "",
  "version": "",
  "tags": [
    ""
  ],
  "authorIds": [],
  "dependencies": [],
  "eventsFunctions": [
    {
      "description": "",
      "fullName": "",
      "functionType": "Action",
      "name": "onFirstSceneLoaded",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "if (!globalThis.ssangervasi) { globalThis.ssangervasi = {} }\nconst ssangervasi = globalThis.ssangervasi;\n\nssangervasi.isDebuggingEnabled = false\nif (!ssangervasi.isDebuggingEnabled) {\n    try {\n        ssangervasi.isDebuggingEnabled = runtimeScene.getGame().isPreview()\n    } catch {}\n}\n\nconst ifDebug = (f) => {\n    if (!ssangervasi.isDebuggingEnabled) {\n        return\n    }\n    f()\n}\n\n// SetupScene history\n;(() => {\n    /**\n     * @typedef SceneHistoryItem\n     * @property {string} sceneName \n     * @property {number} [startedAt]\n     */\n\n    /** @param {string} sceneName*/\n    const pushScene = (sceneName) => {\n        if (!sceneName) {\n            return\n        }\n        const newItem = {\n            sceneName,\n            startedAt: Date.now()\n        }\n        getSceneHistory().push(newItem)\n\n        return newItem\n    }\n\n    /**\n     * @param {string} defaultVal\n     * @param {number} depth\n     * @returns {string} Scene name\n     */\n    const peekScene = (defaultVal, depth) => {\n        defaultVal = defaultVal || \"\"\n        depth = depth || 0\n\n        const hist = getSceneHistory()\n        const index = hist.length - 1 - depth\n        if (index < 0) {\n            return defaultVal\n        }\n        const item = hist[index]\n        return item.sceneName\n    }\n\n    /** @returns {SceneHistoryItem[]} */\n    const getSceneHistory = () => {\n        if (!ssangervasi.sceneHistory) {\n            ssangervasi.sceneHistory = []\n            pushScene(runtimeScene.getName())\n        }\n        return ssangervasi.sceneHistory\n    }\n\n    Object.assign(\n        ssangervasi,\n        {\n            getSceneHistory,\n            pushScene,\n            peekScene \n        }\n    )\n})();\n\n(() => {\n    const getTimestamp = () => (new Date()).toISOString()\n    const parseTimestamp = (timestamp, defaultVal) => {\n        const d = new Date(timestamp)\n        if (isNaN(d)) { return defaultVal || 0; }\n        return d.valueOf()\n    }\n\n    const getLogCtx = () => {\n        let ctx = '(Unknown)'\n        try {\n            const stack = (new Error().stack)\n            const match = stack.match(/([a-zA-Z.]+Context)/)\n            ctx = (match && match.length && match[0]) || ctx\n        } catch (e) {\n            // Not using ssangervasi.error b/c that would recurse back to here :D\n            console.error('Context failure', e)\n        }\n        return ctx\n    }\n\n    const logHist = [];\n\n    const log = (...msgs) => ifDebug(() => {\n        console.log(getTimestamp(), getLogCtx(), ...msgs)\n        logHist.push(...(msgs).map(m => typeof m === 'string' ? m : JSON.stringify(m)))\n    })\n    const warn = (...msgs) => ifDebug(() => console.warn(getTimestamp(), getLogCtx(), ...msgs))\n    const info = (...msgs) => ifDebug(() => console.info(getTimestamp(), getLogCtx(), ...msgs))\n    const error = (...msgs) => ifDebug(() => console.error(getTimestamp(), getLogCtx(), ...msgs))\n\n    Object.assign(\n        ssangervasi,\n        {\n            getTimestamp,\n            log,\n            warn,\n            info,\n            error,\n            logHist,\n        }\n    )\n})();\n\n(() => {\n    const countLines = (str) => {\n        return 1 + str.split('').filter(c => c === '\\n').length\n    }\n\n    const parseArray = (arrayJson) => {\n        try {\n            const arr = JSON.parse(arrayJson)\n            if (Array.isArray(arr)) {\n                return arr\n            }\n        } catch {}\n        return []\n    }\n\n    const wait = (ms) => {\n        return new Promise((resolve) => {\n            setTimeout(() => { resolve() }, ms)\n        })\n    }\n\n    Object.assign(\n        ssangervasi,\n        {\n            countLines,\n            parseArray,\n            wait\n        }\n    )\n})();\n\n(() => {\n    const getPlaylist = (aRuntimeScene, playlistName, fresh) => {\n        if (!(aRuntimeScene && playlistName)) {\n            ssangervasi.error(\"Cannot getPlaylist\", { playlistName })\n            return\n        }\n        const nameToPlaylist = ssangervasi.setupPlaylists(runtimeScene)\n        if (!nameToPlaylist.has(playlistName) || fresh) {\n            nameToPlaylist.set(playlistName, new ssangervasi.Playlist())\n        }\n        return nameToPlaylist.get(playlistName)\n    }\n\n    const setupPlaylists = (aRuntimeScene) => {\n        if (!runtimeScene._srsUtils) {\n            runtimeScene._srsUtils = {};\n        }\n        if (!runtimeScene._srsUtils.nameToPlaylist) {\n            runtimeScene._srsUtils.nameToPlaylist = new Map();\n        }\n\n        return runtimeScene._srsUtils.nameToPlaylist;\n    }\n\n    class Playlist {\n        constructor() {\n            this.items = []\n            this.current = null\n        }\n\n        getCurrent() {\n            if (this.current === null) {\n                return null\n            }\n            return this.items[this.current]\n        }\n\n        add(item) {\n            this.items.push(item)\n            if (this.current === null) {\n                this.current = 0\n            }\n        }\n\n        skipTo(targetItem) {\n            const foundIndex = this.items.findIndex(item => item === targetItem)\n            if (foundIndex === -1) { return null }\n\n            this.current = foundIndex\n            return this.getCurrent()\n        }\n\n        next() {\n            if (this.current === null) { return null }\n\n            this.current = (this.current + 1) % this.items.length\n            return this.getCurrent()\n        }\n\n        previous() {\n            if (this.current === null) { return null }\n\n            this.current = this.current - 1\n            if (this.current < 0) {\n                this.current = this.items.length + this.current\n            }\n            return this.getCurrent()\n        }\n    }\n\n    Object.assign(\n        ssangervasi,\n        {\n            getPlaylist,\n            setupPlaylists,\n            Playlist\n        }\n    )       \n})();\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Log a message to the debug console",
      "fullName": "Console Log",
      "functionType": "Action",
      "name": "consoleLog",
      "private": false,
      "sentence": "Log _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "globalThis.ssangervasi.log(\n    eventsFunctionContext.getArgument('Message')\n)\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Message",
          "longDescription": "",
          "name": "Message",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get milliseconds from seconds",
      "fullName": "ms",
      "functionType": "Expression",
      "name": "ms",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnNumber"
              },
              "parameters": [
                "GetArgumentAsNumber(\"Seconds\") * 1000"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Seconds",
          "longDescription": "",
          "name": "Seconds",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Counts the number of words in a string.",
      "fullName": "Word Count",
      "functionType": "Expression",
      "name": "wordCount",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const stringToCount = eventsFunctionContext.getArgument('StringToCount')\r\nif (!stringToCount) {\r\n    return 0\r\n}\r\n\r\nconst words = stringToCount.match(/\\w+|\\.{3}/g)\r\n// console.log({\r\n//     stringToCount,\r\n//     words,\r\n// })\r\neventsFunctionContext.returnValue = words.length",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "StringToCount",
          "longDescription": "",
          "name": "StringToCount",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "StrTrim",
      "fullName": "StrTrim",
      "functionType": "StringExpression",
      "name": "StrTrim",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const str = eventsFunctionContext.getArgument('Str')\neventsFunctionContext.returnValue = str.toString().trim()\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Str",
          "longDescription": "",
          "name": "Str",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "StrMatches",
      "fullName": "StrMatches",
      "functionType": "Condition",
      "name": "StrMatches",
      "private": false,
      "sentence": "_PARAM1_ StrMatches _PARAM2_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = (() => {\n    const patternArg = eventsFunctionContext.getArgument('Pattern')\n    let pattern = new RegExp(patternArg)\n    const reMatch = patternArg.match(new RegExp('^/(.*)/.*$'))\n\n    if (reMatch) {\n        pattern = new RegExp(reMatch[1], reMatch[2])\n    }\n\n    const strToMatch = eventsFunctionContext.getArgument('StrToMatch')\n    return pattern.test(strToMatch)\n})()\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "ToMatch",
          "longDescription": "",
          "name": "StrToMatch",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Pattern",
          "longDescription": "",
          "name": "Pattern",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "StrToRepl, Pattern, Replacement",
      "fullName": "String replace",
      "functionType": "StringExpression",
      "name": "strReplace",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = (() => {\n    const patternArg = eventsFunctionContext.getArgument('Pattern')\n    let pattern = patternArg\n    const reMatch = patternArg.match(new RegExp('^/(.*)/.*$'))\n\n    if (reMatch) {\n        pattern = new RegExp(reMatch[1], reMatch[2])\n    }\n\n    const strToRepl = eventsFunctionContext.getArgument('StrToRepl')\n    const replacement = eventsFunctionContext.getArgument('Replacement')\n    const result = strToRepl.replace(pattern, replacement)\n\n    // console.log(\"pattern\", pattern)\n    // console.log(\"strToRepl\", strToRepl)\n    // console.log(\"codes\", strToRepl.split('').map((s) => [s, s.charCodeAt(0)]))\n    // console.log(\"result\", result)\n\n    return result\n})()\n",
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "String to replace",
          "longDescription": "",
          "name": "StrToRepl",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "String or RegExp",
          "longDescription": "",
          "name": "Pattern",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Replacement string",
          "longDescription": "",
          "name": "Replacement",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Current playlist item",
      "fullName": "Current playlist item",
      "functionType": "StringExpression",
      "name": "playlistCurrent",
      "private": false,
      "sentence": "Current item  in playlist _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = (() => {\r\n    const playlistName = eventsFunctionContext.getArgument('PlaylistName')\r\n    if (!(playlistName)) {\r\n        globalThis.ssangervasi.error('Cannot get current item in playlist', { playlistName })\r\n        return \"\"\r\n    }\r\n\r\n    const playlist = globalThis.ssangervasi.getPlaylist(runtimeScene, playlistName)\r\n    return playlist.getCurrent() || \"\"\r\n})()",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "PlaylistName",
          "longDescription": "",
          "name": "PlaylistName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Add to playlist",
      "fullName": "Add to playlist",
      "functionType": "Action",
      "name": "playlistAdd",
      "private": false,
      "sentence": "Add _PARAM2_ to playlist _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const playlistName = eventsFunctionContext.getArgument('PlaylistName')\r\nconst item = eventsFunctionContext.getArgument('Item')\r\nif (!(playlistName && item)) {\r\n    globalThis.ssangervasi.error('Cannot add item to playlist', { playlistName, item })\r\n    return\r\n}\r\n\r\n\r\nconst playlist = globalThis.ssangervasi.getPlaylist(runtimeScene, playlistName)\r\nplaylist.add(item)\r\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "PlaylistName",
          "longDescription": "",
          "name": "PlaylistName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Item",
          "longDescription": "",
          "name": "Item",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Previous playlist item",
      "fullName": "Previous playlist item",
      "functionType": "Action",
      "name": "playlistPrevious",
      "private": false,
      "sentence": "Skip to previous item in playlist _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const playlistName = eventsFunctionContext.getArgument('PlaylistName')\r\nif (!playlistName) {\r\n    globalThis.ssangervasi.error('Cannot skip to next item in playlist', { playlistName })\r\n    return\r\n}\r\nconst playlist = globalThis.ssangervasi.getPlaylist(runtimeScene, playlistName)\r\nplaylist.previous()",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "PlaylistName",
          "longDescription": "",
          "name": "PlaylistName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Next playlist item",
      "fullName": "Next playlist item",
      "functionType": "Action",
      "name": "playlistNext",
      "private": false,
      "sentence": "Skip to next item in playlist _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const playlistName = eventsFunctionContext.getArgument('PlaylistName')\r\nif (!playlistName) {\r\n    globalThis.ssangervasi.error('Cannot skip to next item in playlist', { playlistName })\r\n    return\r\n}\r\n\r\nconst playlist = globalThis.ssangervasi.getPlaylist(runtimeScene, playlistName)\r\nplaylist.next()",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "PlaylistName",
          "longDescription": "",
          "name": "PlaylistName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Skip to item",
      "fullName": "Skip to item",
      "functionType": "Action",
      "name": "playlistSkipTo",
      "private": false,
      "sentence": "Skip to item _PARAM2_ in playlist _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const playlistName = eventsFunctionContext.getArgument('PlaylistName')\r\nconst item = eventsFunctionContext.getArgument('Item')\r\nif (!(playlistName && item)) {\r\n    globalThis.ssangervasi.error('Cannot add skip to playlist item', { playlistName, item })\r\n    return\r\n}\r\n\r\nconst playlist = globalThis.ssangervasi.getPlaylist(runtimeScene, playlistName)\r\nconst result = playlist.skipTo(item)\r\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "PlaylistName",
          "longDescription": "",
          "name": "PlaylistName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Item",
          "longDescription": "",
          "name": "Item",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Throttle",
      "fullName": "Throttle",
      "functionType": "Condition",
      "name": "Throttle",
      "private": false,
      "sentence": "Throttle invoke _PARAM1_ every _PARAM2_ ms ",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                ""
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "BuiltinCommonInstructions::Or"
              },
              "parameters": [],
              "subInstructions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "srs_utils::HasLimitedTimer"
                  },
                  "parameters": [
                    "",
                    "GetArgumentAsString(\"TimerName\")",
                    "GetArgumentAsString(\"TimerName\")"
                  ],
                  "subInstructions": []
                },
                {
                  "type": {
                    "inverted": false,
                    "value": "Egal"
                  },
                  "parameters": [
                    "srs_utils::getLimitedTimerFraction(GetArgumentAsString(\"TimerName\"))",
                    ">=",
                    "1"
                  ],
                  "subInstructions": []
                }
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "srs_utils::startLimitedTimer"
              },
              "parameters": [
                "",
                "GetArgumentAsString(\"TimerName\")",
                "GetArgumentAsNumber(\"FrequencyMs\")",
                ""
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "TimerName",
          "longDescription": "",
          "name": "TimerName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "FrequencyMs",
          "longDescription": "",
          "name": "FrequencyMs",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "HasLimitedTimer",
      "fullName": "HasLimitedTimer",
      "functionType": "Condition",
      "name": "HasLimitedTimer",
      "private": false,
      "sentence": "HasLimitedTimer _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                ""
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VariableChildExists"
              },
              "parameters": [
                "TimerNameToLimitMs",
                "GetArgumentAsString(\"TimerName\")"
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "TimerName",
          "longDescription": "",
          "name": "TimerName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "startLimitedTimer",
      "fullName": "startLimitedTimer",
      "functionType": "Action",
      "name": "startLimitedTimer",
      "private": false,
      "sentence": "Start timer _PARAM1_ with limit _PARAM2_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "ModVarScene"
              },
              "parameters": [
                "TimerNameToLimitMs[GetArgumentAsString(\"TimerName\")]",
                "=",
                "GetArgumentAsNumber(\"LimitMs\")"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "ResetTimer"
              },
              "parameters": [
                "Object",
                "GetArgumentAsString(\"TimerName\")"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "UnPauseTimer"
              },
              "parameters": [
                "Object",
                "GetArgumentAsString(\"TimerName\")"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "TimerName",
          "longDescription": "",
          "name": "TimerName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "LimitMs",
          "longDescription": "",
          "name": "LimitMs",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "deleteLimitedTimer",
      "fullName": "deleteLimitedTimer",
      "functionType": "Action",
      "name": "deleteLimitedTimer",
      "private": false,
      "sentence": "Delete limited timer _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "VariableRemoveChild"
              },
              "parameters": [
                "TimerNameToLimitMs",
                "GetArgumentAsString(\"TimerName\")"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "RemoveTimer"
              },
              "parameters": [
                "",
                "GetArgumentAsString(\"TimerName\")"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "TimerName",
          "longDescription": "",
          "name": "TimerName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "getLimitedTimerLimit",
      "fullName": "getLimitedTimerLimit",
      "functionType": "Expression",
      "name": "getLimitedTimerLimit",
      "private": false,
      "sentence": "Start timer _PARAM2_ on _PARAM1_ with limit _PARAM3_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "srs_utils::HasLimitedTimer"
              },
              "parameters": [
                "",
                "GetArgumentAsString(\"TimerName\")",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnNumber"
              },
              "parameters": [
                "Variable(TimerNameToLimitMs[GetArgumentAsString(\"TimerName\")])"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "TimerName",
          "longDescription": "",
          "name": "TimerName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "getLimitedTimerElapsed",
      "fullName": "getLimitedTimerElapsed",
      "functionType": "Expression",
      "name": "getLimitedTimerElapsed",
      "private": false,
      "sentence": "Start timer _PARAM2_ on _PARAM1_ with limit _PARAM3_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "srs_utils::HasLimitedTimer"
              },
              "parameters": [
                "",
                "GetArgumentAsString(\"TimerName\")",
                ""
              ],
              "subInstructions": []
            }
          ],
          "actions": [],
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Egal"
                  },
                  "parameters": [
                    "srs_utils::ms(TimerElapsedTime(GetArgumentAsString(\"TimerName\")))",
                    "<",
                    "srs_utils::getLimitedTimerLimit( GetArgumentAsString(\"TimerName\"))"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "srs_utils::ms(TimerElapsedTime(GetArgumentAsString(\"TimerName\")))"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                }
              ]
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Egal"
                  },
                  "parameters": [
                    "srs_utils::getLimitedTimerLimit( GetArgumentAsString(\"TimerName\"))",
                    "<=",
                    "srs_utils::ms(TimerElapsedTime(GetArgumentAsString(\"TimerName\")))"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "SetReturnNumber"
                      },
                      "parameters": [
                        "srs_utils::getLimitedTimerLimit( GetArgumentAsString(\"TimerName\"))"
                      ],
                      "subInstructions": []
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "PauseTimer"
                      },
                      "parameters": [
                        "",
                        "GetArgumentAsString(\"TimerName\")"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                }
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "TimerName",
          "longDescription": "",
          "name": "TimerName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "getLimitedTimerFraction",
      "fullName": "getLimitedTimerFraction",
      "functionType": "Expression",
      "name": "getLimitedTimerFraction",
      "private": false,
      "sentence": "Start timer _PARAM2_ on _PARAM1_ with limit _PARAM3_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnNumber"
              },
              "parameters": [
                "0"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "srs_utils::HasLimitedTimer"
              },
              "parameters": [
                "",
                "GetArgumentAsString(\"TimerName\")",
                "GetArgumentAsString(\"TimerName\")"
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnNumber"
              },
              "parameters": [
                " srs_utils::getLimitedTimerElapsed( GetArgumentAsString(\"TimerName\")) / srs_utils::getLimitedTimerLimit( GetArgumentAsString(\"TimerName\"))"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "TimerName",
          "longDescription": "",
          "name": "TimerName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "startAnimation",
      "fullName": "startAnimation",
      "functionType": "Action",
      "name": "startAnimation",
      "private": false,
      "sentence": "_PARAM1_ startAnimation _PARAM2_ ",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetAnimationName"
              },
              "parameters": [
                "Sprite",
                "GetArgumentAsString(\"AnimationName\")"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "ChangeSprite"
              },
              "parameters": [
                "Sprite",
                "=",
                "0"
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "PlayAnimation"
              },
              "parameters": [
                "Sprite"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Sprite",
          "longDescription": "",
          "name": "Sprite",
          "optional": false,
          "supplementaryInformation": "Sprite",
          "type": "objectList"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "AnimationName",
          "longDescription": "",
          "name": "AnimationName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "AngleBetweeen _PARAM1_ and _PARAM2_",
      "fullName": "AngleBetweeen",
      "functionType": "Expression",
      "name": "AngleBetweeen",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": true,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "srs_utils::consoleLog"
              },
              "parameters": [
                "",
                "\"Y dif \" + ToString(ObjTo.PointY(\"Center\") - ObjFrom.PointY(\"Center\"))",
                ""
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "srs_utils::consoleLog"
              },
              "parameters": [
                "",
                "\"X diff \" + ToString(ObjTo.PointX(\"Center\") - ObjFrom.PointX(\"Center\"))",
                ""
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "srs_utils::consoleLog"
              },
              "parameters": [
                "",
                "\"Atan \" + ToString(atan((ObjTo.PointY(\"Center\") - ObjFrom.PointY(\"Center\")) / (ObjTo.PointX(\"Center\") - ObjFrom.PointX(\"Center\"))))",
                ""
              ],
              "subInstructions": []
            },
            {
              "type": {
                "inverted": false,
                "value": "srs_utils::consoleLog"
              },
              "parameters": [
                "",
                "\"Deg \" + ToString(ToDeg(atan((ObjTo.PointY(\"Center\") - ObjFrom.PointY(\"Center\")) / (ObjTo.PointX(\"Center\") - ObjFrom.PointX(\"Center\")))))",
                ""
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": true,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "Egal"
              },
              "parameters": [
                "ObjFrom.PointX(\"Center\")",
                "=",
                "ObjTo.PointX(\"Center\")"
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnNumber"
              },
              "parameters": [
                "0"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnNumber"
              },
              "parameters": [
                "-1 * ToDeg(atan((ObjTo.PointY(\"Center\") - ObjFrom.PointY(\"Center\")) / (ObjTo.PointX(\"Center\") - ObjFrom.PointX(\"Center\"))))"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "ObjFrom",
          "longDescription": "",
          "name": "ObjFrom",
          "optional": false,
          "supplementaryInformation": "Sprite",
          "type": "objectList"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "ObjTo",
          "longDescription": "",
          "name": "ObjTo",
          "optional": false,
          "supplementaryInformation": "Sprite",
          "type": "objectList"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "",
      "fullName": "ClampAbs",
      "functionType": "Expression",
      "name": "ClampAbs",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const clampAbs = (val, min, max) => {\n    const sign = val < 0 ? -1 : 1\n    const mag = Math.abs(val)\n    const clamped = Math.max(min, Math.min(mag, max))\n    return sign * clamped\n}\n\neventsFunctionContext.returnValue = clampAbs(\n    eventsFunctionContext.getArgument(\"Value\"),\n    eventsFunctionContext.getArgument(\"Min\"),\n    eventsFunctionContext.getArgument(\"Max\"),    \n)\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Value",
          "longDescription": "",
          "name": "Value",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Min magnitude",
          "longDescription": "",
          "name": "Min",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Max magnitude",
          "longDescription": "",
          "name": "Max",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Uid",
      "fullName": "Uid",
      "functionType": "Expression",
      "name": "Uid",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": false,
                "value": "VarGlobal"
              },
              "parameters": [
                "LastUid",
                "=",
                "0"
              ],
              "subInstructions": []
            }
          ],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "ModVarGlobal"
              },
              "parameters": [
                "LastUid",
                "=",
                "1"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "ModVarGlobal"
              },
              "parameters": [
                "LastUid",
                "+",
                "1"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "inverted": false,
                "value": "SetReturnNumber"
              },
              "parameters": [
                "GlobalVariable(LastUid)"
              ],
              "subInstructions": []
            }
          ],
          "events": []
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "enableDebugging",
      "fullName": "enableDebugging",
      "functionType": "Action",
      "name": "enableDebugging",
      "private": false,
      "sentence": "enableDebugging",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "globalThis.ssangervasi.isDebuggingEnabled = true",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "IsDebuggingEnabled",
      "fullName": "IsDebuggingEnabled",
      "functionType": "Condition",
      "name": "IsDebuggingEnabled",
      "private": false,
      "sentence": "IsDebuggingEnabled",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = globalThis.ssangervasi.isDebuggingEnabled",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Returns true while there are items left in the JSON array, setting a scene variable at each step ",
      "fullName": "ArrayForEach",
      "functionType": "Condition",
      "name": "ArrayForEach",
      "private": false,
      "sentence": "ArrayForEach _PARAM1_  as _PARAM2_ ",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "globalThis.ssangervasi.forEachContexts = globalThis.ssangervasi.forEachContexts || {}\nconst { log, parseArray, forEachContexts } = globalThis.ssangervasi\n\neventsFunctionContext.returnValue = (() => {\n    const vars = runtimeScene.getVariables()\n    const name = eventsFunctionContext.getArgument('ItemVariableName')\n    const itemVar = vars.get(name)\n    const indexVar = vars.get(`${name}_Index`)\n    \n    const context = forEachContexts[name] || {\n        array: parseArray(\n            eventsFunctionContext.getArgument('ArrayJSON')\n        ),\n        index: 0,\n    }\n    \n    forEachContexts[name] = context\n    if (context.array.length <= context.index) {\n        forEachContexts[name] = undefined\n        return false\n    }\n\n    const index = context.index\n    const currentItem = context.array[index]\n    \n    context.index += 1\n    indexVar.setNumber(index)\n\n    if (typeof currentItem === 'number') {\n        itemVar.setNumber(currentItem)\n    } else if (typeof currentItem === 'string') {\n        itemVar.setString(currentItem)\n    } else {\n        itemVar.setString(JSON.stringify(currentItem))\n    }\n\n    return true\n})()",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "ArrayJSON",
          "longDescription": "",
          "name": "ArrayJSON",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Name of the scene variable that will be filled with the current item. The index will be assigned to \"{ItemVariableName}_Index\"",
          "longDescription": "",
          "name": "ItemVariableName",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "ArrayItem _PARAM1_[_PARAM2_] ",
      "fullName": "ArrayItem",
      "functionType": "StringExpression",
      "name": "ArrayItem",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const { parseArray } = globalThis.ssangervasi\n\neventsFunctionContext.returnValue = (() => {\n    const arr = parseArray(\n        eventsFunctionContext.getArgument('ArrayJSON')\n    )\n    if (arr.length === 0 ) {\n        return ''\n    }\n\n    let index = Math.floor(\n        eventsFunctionContext.getArgument('Index')\n    )\n    if (index < 0) {\n        index = arr.length + index\n    }\n    \n    const item = arr[index]\n    if (typeof item === 'string') {\n        return item\n    } else if (item === undefined) {\n        return ''\n    } else  {\n        return JSON.stringify(item)\n    }\n})()",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "ArrayJSON",
          "longDescription": "",
          "name": "ArrayJSON",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Index",
          "longDescription": "",
          "name": "Index",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "ArrayLength _PARAM1_",
      "fullName": "ArrayLength",
      "functionType": "Expression",
      "name": "ArrayLength",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const { parseArray } = globalThis.ssangervasi\n\neventsFunctionContext.returnValue = (() => {\n    return parseArray(\n        eventsFunctionContext.getArgument('ArrayJSON')\n    ).length\n})()",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "ArrayJSON",
          "longDescription": "",
          "name": "ArrayJSON",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "TimeMs",
      "fullName": "TimeMs",
      "functionType": "Expression",
      "name": "TimeMs",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = Date.now()\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "ToCoords(_PARAM1_, _PARAM2_",
      "fullName": "ToCoords",
      "functionType": "StringExpression",
      "name": "ToCoords",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "const toCoords = () => {\n    /** @type Number */\n    const x = eventsFunctionContext.getArgument(\"X\")\n    /** @type Number */\n    const y = eventsFunctionContext.getArgument(\"Y\")\n    return `(${x.toFixed(2)}, ${y.toFixed(2)})`\n}\n\neventsFunctionContext.returnValue = toCoords()",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "X",
          "longDescription": "",
          "name": "X",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        },
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "Y",
          "longDescription": "",
          "name": "Y",
          "optional": false,
          "supplementaryInformation": "",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "trim _PARAM1_",
      "fullName": "trim",
      "functionType": "StringExpression",
      "name": "trim",
      "private": false,
      "sentence": "",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = eventsFunctionContext.getArgument(\"ToTrim\").toString().trim()",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "ToTrim",
          "longDescription": "",
          "name": "ToTrim",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Changed",
      "fullName": "Changed",
      "functionType": "Condition",
      "name": "Changed",
      "private": false,
      "sentence": "Changed _PARAM1_",
      "events": [
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [],
          "events": []
        },
        {
          "disabled": false,
          "folded": false,
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": "eventsFunctionContext.returnValue = (() => {\n    const vars = runtimeScene.getVariables()\n    /** @type {string} */\n    const sceneVariableName = eventsFunctionContext.getArgument('SceneVariable')\n\n    const parts = sceneVariableName.split('.')\n    const rootName = parts.shift()\n    const rootVar = vars.get(rootName)\n    const currentVar = parts.reduce((parentVar, childName) => parentVar.getChild(childName), rootVar)\n\n    const prevVar = vars.get(`PREVIOUS.${sceneVariableName}`)\n\n    const currentValue = currentVar.getValue()\n    if (currentValue === prevVar.getValue()) {\n        return false\n    }\n\n    console.log('changed!', { rootName, sceneVariableName, parts, currentVar, prevVar})\n    \n    prevVar._type = currentVar.getType()\n    prevVar.setValue(currentValue)\n    return true\n})()\n",
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [
        {
          "codeOnly": false,
          "defaultValue": "",
          "description": "SceneVariable",
          "longDescription": "",
          "name": "SceneVariable",
          "optional": false,
          "supplementaryInformation": "",
          "type": "string"
        }
      ],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [
    {
      "description": "",
      "fullName": "TextMarquee",
      "name": "TextMarquee",
      "objectType": "TextObject::Text",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPreEvents",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "DepartScene"
                  },
                  "parameters": [
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": "const { countLines } = globalThis.ssangervasi\nconst [textObj] = objects\nconst vars = textObj.getVariables()\nconst originalTextVar = vars.get('OriginalText')\nconst maxCharsVar = vars.get('MaxChars')\nconst maxLinesVar = vars.get('MaxLines')\n\nconst originalText = textObj.getString()\n\nmaxCharsVar.setNumber(originalText.split(/\\s+/).join(' ').length)\nmaxLinesVar.setNumber(countLines(originalText))\n\noriginalTextVar.setString(originalText)\ntextObj.setString('')\n\n",
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                },
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "VarObjetTxt"
                      },
                      "parameters": [
                        "Object",
                        "Message",
                        "=",
                        "\"0\""
                      ],
                      "subInstructions": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "ModVarObjetTxt"
                      },
                      "parameters": [
                        "Object",
                        "Message",
                        "=",
                        "Object.Behavior::PropertyMessage()"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                }
              ]
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TextObject::Text",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::TextMarquee",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "marquee",
          "fullName": "marquee",
          "functionType": "Action",
          "name": "marquee",
          "private": false,
          "sentence": "_PARAM0_ marquee",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "srs_utils::Throttle"
                  },
                  "parameters": [
                    "",
                    "Object",
                    "\"text_throttle\"",
                    "Object.Behavior::ThrottleMs()",
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": "const { countLines, log } = globalThis.ssangervasi\n\nconst [textObj] = objects\nconst vars = textObj.getVariables()\nconst endIndexVar = vars.get('EndIndex')\nconst maxLines = vars.get('MaxLines').getAsNumber()\nconst message = vars.get('Message').getAsString()\nconst maxChars = vars.get('MaxChars').getAsNumber()\n\nconst endIndex = endIndexVar.getAsNumber() + 1\nconst startIndex = Math.max(0, endIndex - maxChars)\nconst characterLimitedMessage = message.slice(startIndex, endIndex + 1)\n\nconst excessLines = Math.max(0, countLines(characterLimitedMessage) - maxLines)\nconst lineLimitedMessage = characterLimitedMessage.split('\\n').slice(excessLines).join('\\n')\n\nendIndexVar.setNumber(endIndex)\ntextObj.setString(lineLimitedMessage)\n",
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                }
              ]
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TextObject::Text",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::TextMarquee",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "ThrottleMs",
          "fullName": "ThrottleMs",
          "functionType": "Expression",
          "name": "ThrottleMs",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetReturnNumber"
                  },
                  "parameters": [
                    "srs_utils::ms(Object.Behavior::PropertyTotalSeconds()) / StrLength(Object.VariableString(Message))"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TextObject::Text",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::TextMarquee",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "IsFinished",
          "fullName": "IsFinished",
          "functionType": "Condition",
          "name": "IsFinished",
          "private": false,
          "sentence": "_PARAM0_ IsFinished",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "eventsFunctionContext.returnValue = (() => {\n    const [textObj] = objects\n    const vars = textObj.getVariables()\n    const endIndex = vars.get('EndIndex').getAsNumber()\n    const message = vars.get('Message').getAsString()\n\n    return message.length <= endIndex \n})()\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": false
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TextObject::Text",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::TextMarquee",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [
        {
          "value": "5",
          "type": "Number",
          "label": "TotalSeconds",
          "description": "",
          "extraInformation": [],
          "hidden": false,
          "name": "TotalSeconds"
        },
        {
          "value": "Marquee de Sade",
          "type": "String",
          "label": "Message - Set instance variable to override",
          "description": "",
          "extraInformation": [],
          "hidden": false,
          "name": "Message"
        }
      ]
    },
    {
      "description": "https://github.com/4ian/GDevelop/issues/1449",
      "fullName": "",
      "name": "RescaledText",
      "objectType": "TextObject::Text",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPreEvents",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "DepartScene"
                  },
                  "parameters": [
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "ModVarObjet"
                      },
                      "parameters": [
                        "Object",
                        "TextScaleFactor",
                        "=",
                        "Object.Behavior::PropertyScaleFactor()"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                },
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "TextObject::SetPadding"
                      },
                      "parameters": [
                        "Object",
                        "=",
                        "0"
                      ],
                      "subInstructions": []
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "ModVarObjet"
                      },
                      "parameters": [
                        "Object",
                        "OriginalWidth",
                        "=",
                        "Object.Width()"
                      ],
                      "subInstructions": []
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "TextObject::WrappingWidth"
                      },
                      "parameters": [
                        "Object",
                        "*",
                        "Object.Variable(TextScaleFactor)"
                      ],
                      "subInstructions": []
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "TextObject::Size"
                      },
                      "parameters": [
                        "Object",
                        "*",
                        "Object.Variable(TextScaleFactor)"
                      ],
                      "subInstructions": []
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "TextObject::Scale"
                      },
                      "parameters": [
                        "Object",
                        "=",
                        "Object.Variable(OriginalWidth)/Object.Width()"
                      ],
                      "subInstructions": []
                    },
                    {
                      "type": {
                        "inverted": false,
                        "value": "MettreXY"
                      },
                      "parameters": [
                        "Object",
                        "=",
                        "Object.X()",
                        "=",
                        "Object.Y()"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                }
              ]
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TextObject::Text",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::RescaledText",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [
        {
          "value": "10",
          "type": "Number",
          "label": "ScaleFactor",
          "description": "",
          "extraInformation": [],
          "hidden": false,
          "name": "ScaleFactor"
        }
      ]
    },
    {
      "description": "Panel Sprite Button",
      "fullName": "Button",
      "name": "Button",
      "objectType": "PanelSpriteObject::PanelSprite",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "onCreated",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "ModVarObjetTxt"
                  },
                  "parameters": [
                    "Object",
                    "State",
                    "=",
                    "\"inactive\""
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::Button",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPreEvents",
          "private": false,
          "sentence": "",
          "events": [
            {
              "colorB": 228,
              "colorG": 176,
              "colorR": 74,
              "creationTime": 0,
              "disabled": false,
              "folded": false,
              "name": "Cleanup",
              "source": "",
              "type": "BuiltinCommonInstructions::Group",
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "ObjectVariableAsBoolean"
                      },
                      "parameters": [
                        "Object",
                        "Clicked",
                        "True"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "SetObjectVariableAsBoolean"
                      },
                      "parameters": [
                        "Object",
                        "Clicked",
                        "False"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                }
              ],
              "parameters": []
            },
            {
              "colorB": 228,
              "colorG": 176,
              "colorR": 74,
              "creationTime": 0,
              "disabled": false,
              "folded": false,
              "name": "Mouse state",
              "source": "",
              "type": "BuiltinCommonInstructions::Group",
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "VarObjetTxt"
                      },
                      "parameters": [
                        "Object",
                        "State",
                        "!=",
                        "\"disabled\""
                      ],
                      "subInstructions": []
                    }
                  ],
                  "actions": [],
                  "events": [
                    {
                      "disabled": false,
                      "folded": false,
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "inverted": false,
                            "value": "SourisSurObjet"
                          },
                          "parameters": [
                            "Object",
                            "",
                            "",
                            ""
                          ],
                          "subInstructions": []
                        }
                      ],
                      "actions": [],
                      "events": [
                        {
                          "disabled": false,
                          "folded": false,
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "inverted": true,
                                "value": "MouseButtonPressed"
                              },
                              "parameters": [
                                "",
                                "Left"
                              ],
                              "subInstructions": []
                            }
                          ],
                          "actions": [],
                          "events": [
                            {
                              "disabled": false,
                              "folded": false,
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [
                                {
                                  "type": {
                                    "inverted": false,
                                    "value": "VarObjetTxt"
                                  },
                                  "parameters": [
                                    "Object",
                                    "State",
                                    "=",
                                    "\"inactive\""
                                  ],
                                  "subInstructions": []
                                }
                              ],
                              "actions": [
                                {
                                  "type": {
                                    "inverted": false,
                                    "value": "ModVarObjetTxt"
                                  },
                                  "parameters": [
                                    "Object",
                                    "State",
                                    "=",
                                    "\"hover\""
                                  ],
                                  "subInstructions": []
                                }
                              ],
                              "events": []
                            },
                            {
                              "disabled": false,
                              "folded": false,
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [
                                {
                                  "type": {
                                    "inverted": false,
                                    "value": "VarObjetTxt"
                                  },
                                  "parameters": [
                                    "Object",
                                    "State",
                                    "=",
                                    "\"active\""
                                  ],
                                  "subInstructions": []
                                }
                              ],
                              "actions": [
                                {
                                  "type": {
                                    "inverted": false,
                                    "value": "SetObjectVariableAsBoolean"
                                  },
                                  "parameters": [
                                    "Object",
                                    "Clicked",
                                    "True"
                                  ],
                                  "subInstructions": []
                                },
                                {
                                  "type": {
                                    "inverted": false,
                                    "value": "ModVarObjetTxt"
                                  },
                                  "parameters": [
                                    "Object",
                                    "State",
                                    "=",
                                    "\"hover\""
                                  ],
                                  "subInstructions": []
                                }
                              ],
                              "events": []
                            }
                          ]
                        },
                        {
                          "disabled": false,
                          "folded": false,
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "inverted": false,
                                "value": "MouseButtonPressed"
                              },
                              "parameters": [
                                "",
                                "Left"
                              ],
                              "subInstructions": []
                            }
                          ],
                          "actions": [],
                          "events": [
                            {
                              "disabled": false,
                              "folded": false,
                              "type": "BuiltinCommonInstructions::Standard",
                              "conditions": [
                                {
                                  "type": {
                                    "inverted": false,
                                    "value": "VarObjetTxt"
                                  },
                                  "parameters": [
                                    "Object",
                                    "State",
                                    "=",
                                    "\"hover\""
                                  ],
                                  "subInstructions": []
                                }
                              ],
                              "actions": [
                                {
                                  "type": {
                                    "inverted": false,
                                    "value": "ModVarObjetTxt"
                                  },
                                  "parameters": [
                                    "Object",
                                    "State",
                                    "=",
                                    "\"active\""
                                  ],
                                  "subInstructions": []
                                }
                              ],
                              "events": []
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "disabled": false,
                      "folded": false,
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "inverted": true,
                            "value": "SourisSurObjet"
                          },
                          "parameters": [
                            "Object",
                            "",
                            "",
                            ""
                          ],
                          "subInstructions": []
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "inverted": false,
                            "value": "ModVarObjetTxt"
                          },
                          "parameters": [
                            "Object",
                            "State",
                            "=",
                            "\"inactive\""
                          ],
                          "subInstructions": []
                        }
                      ],
                      "events": []
                    }
                  ]
                }
              ],
              "parameters": []
            },
            {
              "colorB": 228,
              "colorG": 176,
              "colorR": 74,
              "creationTime": 0,
              "disabled": false,
              "folded": false,
              "name": "Colors",
              "source": "",
              "type": "BuiltinCommonInstructions::Group",
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "VarObjetTxt"
                      },
                      "parameters": [
                        "Object",
                        "State",
                        "=",
                        "\"inactive\""
                      ],
                      "subInstructions": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "PanelSpriteObject::SetColor"
                      },
                      "parameters": [
                        "Object",
                        "\"255;255;255\""
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                },
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "VarObjetTxt"
                      },
                      "parameters": [
                        "Object",
                        "State",
                        "=",
                        "\"disabled\""
                      ],
                      "subInstructions": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "PanelSpriteObject::SetColor"
                      },
                      "parameters": [
                        "Object",
                        "Object.Behavior::PropertyDisabledTint()"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                },
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "VarObjetTxt"
                      },
                      "parameters": [
                        "Object",
                        "State",
                        "=",
                        "\"hover\""
                      ],
                      "subInstructions": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "PanelSpriteObject::SetColor"
                      },
                      "parameters": [
                        "Object",
                        "Object.Behavior::PropertyHoverTint()"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                },
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "VarObjetTxt"
                      },
                      "parameters": [
                        "Object",
                        "State",
                        "=",
                        "\"active\""
                      ],
                      "subInstructions": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "PanelSpriteObject::SetColor"
                      },
                      "parameters": [
                        "Object",
                        "Object.Behavior::PropertyActiveTint()"
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                }
              ],
              "parameters": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::Button",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Clicked",
          "fullName": "Clicked",
          "functionType": "Condition",
          "name": "Clicked",
          "private": false,
          "sentence": "_PARAM0_ was clicked",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetReturnBoolean"
                  },
                  "parameters": [
                    "False"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "ObjectVariableAsBoolean"
                  },
                  "parameters": [
                    "Object",
                    "Clicked",
                    "True"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetReturnBoolean"
                  },
                  "parameters": [
                    "True"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::Button",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "enable or disable the button",
          "fullName": "enable",
          "functionType": "Action",
          "name": "enable",
          "private": false,
          "sentence": "_PARAM0_ enable _PARAM2_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "GetArgumentAsBoolean"
                  },
                  "parameters": [
                    "\"Enable\""
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "srs_utils::Button::Is"
                      },
                      "parameters": [
                        "Object",
                        "Behavior",
                        "\"disabled\"",
                        ""
                      ],
                      "subInstructions": []
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "inverted": false,
                        "value": "ModVarObjetTxt"
                      },
                      "parameters": [
                        "Object",
                        "State",
                        "=",
                        "\"inactive\""
                      ],
                      "subInstructions": []
                    }
                  ],
                  "events": []
                }
              ]
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "GetArgumentAsBoolean"
                  },
                  "parameters": [
                    "\"Enable\""
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "ModVarObjetTxt"
                  },
                  "parameters": [
                    "Object",
                    "State",
                    "=",
                    "\"disabled\""
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::Button",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "",
              "longDescription": "",
              "name": "Enable",
              "optional": false,
              "supplementaryInformation": "",
              "type": "trueorfalse"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Is",
          "fullName": "Is",
          "functionType": "Condition",
          "name": "Is",
          "private": false,
          "sentence": "_PARAM0_ is _PARAM2_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "VarObjetTxt"
                  },
                  "parameters": [
                    "Object",
                    "State",
                    "=",
                    "GetArgumentAsString(\"State\")"
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "SetReturnBoolean"
                  },
                  "parameters": [
                    "True"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "PanelSpriteObject::PanelSprite",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::Button",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "",
              "longDescription": "",
              "name": "State",
              "optional": false,
              "supplementaryInformation": "[\"active\",\"disabled\",\"inactive\",\"hover\"]",
              "type": "stringWithSelector"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [
        {
          "value": "\"255;255;255\"",
          "type": "String",
          "label": "",
          "description": "",
          "extraInformation": [],
          "hidden": false,
          "name": "HoverTint"
        },
        {
          "value": "\"255;255;255\"",
          "type": "String",
          "label": "",
          "description": "",
          "extraInformation": [],
          "hidden": false,
          "name": "ActiveTint"
        },
        {
          "value": "\"255;255;255\"",
          "type": "String",
          "label": "",
          "description": "",
          "extraInformation": [],
          "hidden": false,
          "name": "DisabledTint"
        }
      ]
    },
    {
      "description": "",
      "fullName": "",
      "name": "HiddenAtRuntime",
      "objectType": "",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "onCreated",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Cache"
                  },
                  "parameters": [
                    "Object"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::HiddenAtRuntime",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": []
    },
    {
      "description": "",
      "fullName": "",
      "name": "Label",
      "objectType": "TextObject::Text",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "onCreated",
          "private": false,
          "sentence": "",
          "events": [],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TextObject::Text",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::Label",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPreEvents",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "TextObject::String"
                  },
                  "parameters": [
                    "Object",
                    "=",
                    "Object.VariableString(Label)"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TextObject::Text",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::Label",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": []
    },
    {
      "description": "",
      "fullName": "",
      "name": "DebugLog",
      "objectType": "TextObject::Text",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPreEvents",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "ModVarObjet"
                  },
                  "parameters": [
                    "Object",
                    "Size",
                    "=",
                    "Object.Behavior::PropertySize()"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "if (!ssangervasi?.logHist) {\n    return\n}\n/**\n * @type {string[]}\n */\nconst logHist = ssangervasi.logHist\n\n/**\n * @type {gdjs.TextRuntimeObject}\n */\nconst obj = objects[0]\nconst vars = obj.getVariables()\nconst sizeVar = vars.get('Size')\nconst size = sizeVar.getAsNumber()\n\nobj.setString(logHist.slice(-1 * size).join('\\n'))\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": false
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": true,
                    "value": "srs_utils::IsDebuggingEnabled"
                  },
                  "parameters": [
                    "",
                    ""
                  ],
                  "subInstructions": []
                }
              ],
              "actions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "Cache"
                  },
                  "parameters": [
                    "Object"
                  ],
                  "subInstructions": []
                }
              ],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "TextObject::Text",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::DebugLog",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": [
        {
          "value": "5",
          "type": "Number",
          "label": "Size: number of messages from the end of the log to display.",
          "description": "",
          "extraInformation": [],
          "hidden": false,
          "name": "Size"
        }
      ]
    },
    {
      "description": "",
      "fullName": "",
      "name": "BBTextContained",
      "objectType": "BBText::BBText",
      "eventsFunctions": [
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "onCreated",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Extend the behavior constructor 's prototype to share code between instances.",
              "comment2": ""
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": "\nconst BBTextContained = gdjs.getBehaviorConstructor('srs_utils::BBTextContained')\nif (!BBTextContained?.prototype) {\n    console.warn(\"No BBTextContained constructor.\")\n    return\n}\nif (BBTextContained.prototype.bbTextContained_init) {\n    // Already extended\n    return\n}\n\nObject.assign(BBTextContained.prototype, {\n    bbTextContained_targetHeight: 0,\n    bbTextContained_lineHeight: 0,\n    bbTextContained_targetLineCount: 0,\n    /**\n     * All of the lines after wrapping has been applied to the rawText.\n     * @type {string[]}\n     */\n    bbTextContained_lines: [],\n    /**\n     * The groups determine what is actually written to the BBText. If any revealing\n     * or scrolling has happened, this will be out of sync with bbTextContained_lines.\n     */\n    bbTextContained_lineGroups: {\n        /** @type {string[]} */\n        above: [],\n        /** @type {string[]} */\n        visible: [],\n        /** @type {string[]} */\n        below: [],\n    },\n    bbTextContained_rawText: \"\",\n    bbTextContained_init: function () {\n        const targetHeight = this.owner.getHeight()\n        this.bbTextContained_targetHeight = targetHeight\n        \n        const metrics = this.bbTextContained_getMetrics()\n        const targetLineCount = Math.floor(targetHeight / metrics.lineHeight)\n        this.bbTextContained_lineHeight = metrics.lineHeight\n        this.bbTextContained_targetLineCount = targetLineCount\n    },\n    bbTextContained_setText: function (\n        /** @type {string} */\n        text\n    ) {\n        const rawText = this.bbTextContained_rawText\n        this.bbTextContained_rawText = text\n\n        if (text === rawText) {\n            // No text change, so line alignment should not have changed.\n            return\n        }\n\n        const metrics = this.bbTextContained_getMetrics(text)\n        const lines = metrics.lines\n\n        this.bbTextContained_lines = lines\n        this.bbTextContained_regroup(lines)\n        this.bbTextContained_rewrite()\n    },\n    bbTextContained_regroup: function (\n        /** @type {string[]} */\n        lines\n    ) {\n        const targetLineCount = this.bbTextContained_targetLineCount\n        const lineGroups = this.bbTextContained_lineGroups\n\n        if (lines.length <= targetLineCount) {\n            lineGroups.above = []\n            lineGroups.visible = lines\n            lineGroups.below = []\n            return\n        }\n\n        lineGroups.above = lines.slice(0, lines.length - targetLineCount)\n        lineGroups.visible = lines.slice(lines.length - targetLineCount, lines.length)\n        lineGroups.below = []\n    }, \n    bbTextContained_reveal: function (\n        /** @type {string} */\n        prefix\n    ) {\n        const lineGroups = this.bbTextContained_lineGroups\n        const lines = this.bbTextContained_lines\n        \n        ;(() => {\n            const firstLine = lines[0] || ''\n            const lineUpToPrefix = firstLine.slice(0, prefix.length)\n            const prefixUpToLine = prefix.slice(0, lineUpToPrefix.length)\n            if (lineUpToPrefix !== prefixUpToLine) {\n                console.warn('Start of prefix does not match start of first line.', {\n                    firstLine,\n                    prefix\n                })\n            }\n        })()\n\n        let lastVisibleLineIndex = 0\n        let charsTaken = 0\n        lines.find((line, index) => {\n            lastVisibleLineIndex = index\n            if (prefix.length <= charsTaken + line.length) {\n                return true\n            }\n            charsTaken += line.length + 1 // The newline/space\n        })\n\n        const visiblePortion = prefix.slice(charsTaken, prefix.length)\n\n        ;(() => {\n            const lastVisibleLine = lines[lastVisibleLineIndex]\n            if (!lastVisibleLine.includes(visiblePortion)) {\n                console.warn('Last line does not include the visible portion', {\n                    lastVisibleLine,\n                    visiblePortion,\n                    prefix,\n                    charsTaken,\n                    lines,\n                    lastVisibleLineIndex,\n                })\n            }\n        })()\n\n        const revealedLines = lines.slice(0, lastVisibleLineIndex)\n        revealedLines.push(visiblePortion)\n\n        //  ;(() => {\n        //      console.log('Reveal', {\n        //         lines,\n        //         lastVisibleLineIndex,\n        //         revealedLines,\n        //         charsTaken,\n        //     })\n        // })()\n\n        this.bbTextContained_regroup(revealedLines)\n        this.bbTextContained_rewrite()\n    }, \n    bbTextContained_rewrite: function () {\n        const newText = this.bbTextContained_lineGroups.visible.join('\\n')\n        this.owner.setBBText(newText)\n    },\n    bbTextContained_getMetrics: function (textToMeasure) {\n        const text = textToMeasure === undefined ? this.owner.getBBText() : textToMeasure\n        const pixiObject = this.owner._renderer._pixiObject\n        const style = pixiObject._style\n        const metrics = PIXI.TextMetrics.measureText(text, style)\n        return metrics\n    },\n    bbTextContained_shiftUp: function () {\n        const { above, visible, below } = this.bbTextContained_lineGroups\n        \n        if (0 < visible.length) {\n            above.push(visible.shift())\n        }\n\n        if (0 < below.length) {\n            visible.push(below.shift())\n        }\n\n        this.bbTextContained_rewrite()\n    },\n    bbTextContained_shiftDown: function () {\n        const { above, visible, below } = this.bbTextContained_lineGroups\n        const targetLineCount = this.bbTextContained_targetLineCount\n\n        if (0 < above.length) {\n            visible.unshift(above.pop())\n        }\n        if (targetLineCount < visible.length) {\n            below.unshift(visible.pop())\n        }\n\n        this.bbTextContained_rewrite()\n    },\n    bbTextContained_test: async function() {\n        console.log(\"Setting full\")        \n        const fullText = `NPC BBText lots of text to try [b]this out and see the wrapping[/b] and everything oh how are you do you like really-long-hyphenated-phrases? And another line lets' overflow this B A B Y if we want. Oh yeah we are getting wild now we don't even know how to stop. Sheeeeeeesh call the police on this text mamamamamamaaaa.`\n        this.bbTextContained_setText(fullText)\n        await ssangervasi.wait(500)\n        // console.log(\"Looping\")\n        // for (const endIndex in fullText) {\n        //     const substr = fullText.slice(0, endIndex)\n        //     this.bbTextContained_reveal(substr)\n        //     await ssangervasi.wait(40)\n        // }\n        // console.log(\"Looped\")\n        console.log(\"Revealing full multiple times should be fine.\")\n        await ssangervasi.wait(40)\n        this.bbTextContained_reveal(fullText)\n        await ssangervasi.wait(40)\n        this.bbTextContained_reveal(fullText)\n\n        console.log(\"Done\")\n    }\n \n})\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
              "parameterObjects": "Object",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "BBText::BBText",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::BBTextContained",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPreEvents",
          "private": false,
          "sentence": "",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "inverted": false,
                    "value": "BuiltinCommonInstructions::Once"
                  },
                  "parameters": [],
                  "subInstructions": []
                }
              ],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "Run setup for every instance. This happens in pre events b/c doing it on onCreated means the BBText initial styling might not be finished.",
                  "comment2": ""
                },
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": "\nconst obj = objects[0]\nconst behavior = obj.getBehavior('BBTextContained')\nbehavior.bbTextContained_init()\n",
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                }
              ]
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "BBText::BBText",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::BBTextContained",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "",
          "fullName": "",
          "functionType": "Action",
          "name": "doStepPostEvents",
          "private": false,
          "sentence": "",
          "events": [],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "BBText::BBText",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::BBTextContained",
              "type": "behavior"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "scroll",
          "fullName": "scroll",
          "functionType": "Action",
          "name": "scroll",
          "private": false,
          "sentence": "_PARAM0_ scroll _PARAM2_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": "const direction = eventsFunctionContext.getArgument('Direction')\n\nconst obj = objects[0]\nconst behavior = obj.getBehavior('BBTextContained')\n\nif (direction === 'up') {\n    behavior.bbTextContained_shiftDown()\n} else if (direction === 'down') {\n    behavior.bbTextContained_shiftUp()\n} \n",
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                }
              ]
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "BBText::BBText",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::BBTextContained",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Scroll up/down",
              "longDescription": "",
              "name": "Direction",
              "optional": false,
              "supplementaryInformation": "[\"up\",\"down\"]",
              "type": "stringWithSelector"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "setText string of the BBText while obeying contained",
          "fullName": "setText",
          "functionType": "Action",
          "name": "setText",
          "private": false,
          "sentence": "_PARAM0_ setText _PARAM2_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": "\nconst obj = objects[0]\nconst behavior = obj.getBehavior('BBTextContained')\nbehavior.bbTextContained_setText(eventsFunctionContext.getArgument('Text'))\n",
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                }
              ]
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "BBText::BBText",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::BBTextContained",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Text",
              "longDescription": "",
              "name": "Text",
              "optional": false,
              "supplementaryInformation": "",
              "type": "string"
            }
          ],
          "objectGroups": []
        },
        {
          "description": "Reveal only the substring of the text that matches Text (from the start) while obeying wrapping.",
          "fullName": "reveal",
          "functionType": "Action",
          "name": "reveal",
          "private": false,
          "sentence": "_PARAM0_ reveal _PARAM2_",
          "events": [
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": [
                {
                  "disabled": false,
                  "folded": false,
                  "type": "BuiltinCommonInstructions::JsCode",
                  "inlineCode": "\nconst obj = objects[0]\nconst behavior = obj.getBehavior('BBTextContained')\nbehavior.bbTextContained_reveal(eventsFunctionContext.getArgument('Text'))\n",
                  "parameterObjects": "Object",
                  "useStrict": true,
                  "eventsSheetExpanded": false
                }
              ]
            },
            {
              "disabled": false,
              "folded": false,
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [],
              "actions": [],
              "events": []
            }
          ],
          "parameters": [
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Object",
              "longDescription": "",
              "name": "Object",
              "optional": false,
              "supplementaryInformation": "BBText::BBText",
              "type": "object"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Behavior",
              "longDescription": "",
              "name": "Behavior",
              "optional": false,
              "supplementaryInformation": "srs_utils::BBTextContained",
              "type": "behavior"
            },
            {
              "codeOnly": false,
              "defaultValue": "",
              "description": "Text",
              "longDescription": "",
              "name": "Text",
              "optional": false,
              "supplementaryInformation": "",
              "type": "string"
            }
          ],
          "objectGroups": []
        }
      ],
      "propertyDescriptors": []
    }
  ]
}